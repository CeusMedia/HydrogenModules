<?xml version="1.0"?>
<module>
	<title>Info: Downloads</title>
	<description><![CDATA[]]></description>
	<category>Info</category>
	<version>0.3.4</version>
	<log version="0.3.4">Cloned from module Info:Files.</log>
	<company site="http://ceusmedia.de/">Ceus Media</company>
	<author email="christian.wuerker@ceusmedia.de">Christian W&#xFC;rker</author>
	<files>
		<class>Controller/Info/Download.php5</class>
		<class>View/Info/Download.php5</class>
		<class>Model/Download/File.php5</class>
		<class>Model/Download/Folder.php5</class>
		<locale>de/info/download.ini</locale>
		<locale>de/html/info/download/index.bottom.html</locale>
		<locale>de/html/info/download/index.top.html</locale>
		<template>info/download/index.php</template>
		<template>info/download/index.folder.php</template>
		<template>info/download/index.info.php</template>
		<template>info/download/index.scan.php</template>
		<template>info/download/index.upload.php</template>
		<style>module.info.downloads.css</style>
		<script load="auto">module.info.downloads.js</script>
		<file>contents/downloads/.htaccess</file>
	</files>
	<config protected="yes" type="string" name="path">contents/downloads/</config>
	<link xml:lang="de" access="acl" rank="21" path="info/file">Downloads</link>
	<link xml:lang="en" access="acl" rank="21" path="info/file">Downloads</link>
	<relations>
		<needs type="module">UI_Bootstrap</needs>
		<needs type="module">UI_Helper_TimePhraser</needs>
		<needs type="module">UI_Helper_Input_File</needs>
	</relations>
	<hook type="resource" resource="Page" event="collectNews">Controller_Info_Download::___onPageCollectNews</hook>
	<hook type="resource" resource="Novelties" event="collect">Controller_Info_Download::___onCollectNovelties</hook>
	<sql on="install" type="mysql" version="0.3.4"><![CDATA[
DROP TABLE IF EXISTS `<%?prefix%>download_files`;
CREATE TABLE IF NOT EXISTS `<%?prefix%>download_files` (
  `downloadFileId` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `downloadFolderId` int(10) UNSIGNED NOT NULL,
  `rank` smallint(6) NOT NULL,
  `size` int(10) UNSIGNED NOT NULL,
  `title` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `description` text COLLATE utf8_unicode_ci NOT NULL,
  `nrDownloads` smallint(5) UNSIGNED NOT NULL,
  `uploadedAt` decimal(12,0) UNSIGNED NOT NULL,
  `downloadedAt` decimal(12,0) UNSIGNED DEFAULT '0',
  PRIMARY KEY (`downloadFileId`),
  KEY `downloadFolderId` (`downloadFolderId`),
  KEY `rank` (`rank`),
  KEY `title` (`title`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

DROP TABLE IF EXISTS `<%?prefix%>download_folders`;
CREATE TABLE IF NOT EXISTS `<%?prefix%>download_folders` (
  `downloadFolderId` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `parentId` int(10) UNSIGNED NOT NULL,
  `type` tinyint(1) UNSIGNED NOT NULL,
  `rank` smallint(5) UNSIGNED NOT NULL,
  `title` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `description` text COLLATE utf8_unicode_ci NOT NULL,
  `nrFolders` smallint(5) UNSIGNED DEFAULT '0',
  `nrFiles` smallint(5) UNSIGNED DEFAULT '0',
  `createdAt` decimal(12,0) UNSIGNED NOT NULL,
  `modifiedAt` decimal(12,0) UNSIGNED DEFAULT '0',
  PRIMARY KEY (`downloadFolderId`),
  KEY `parentId` (`parentId`),
  KEY `type` (`type`),
  KEY `rank` (`rank`),
  KEY `title` (`title`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
]]></sql>
	<sql on="uninstall" type="mysql"><![CDATA[
DROP TABLE IF EXISTS `<%?prefix%>download_files`;
DROP TABLE IF EXISTS `<%?prefix%>download_folders`;
]]></sql>
</module>
