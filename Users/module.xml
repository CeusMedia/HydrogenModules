<?xml version="1.0"?>
<module>
	<title>Users</title>
	<description>Basic user support and management.</description>
	<version>0.2</version>
	<files>
		<class>Controller/Manage/User.php5</class>
		<class>Model/User.php5</class>
		<class>View/Manage/User.php5</class>
		<locale>de/manage/user.ini</locale>
		<template>manage/user/add.php</template>
		<template>manage/user/edit.php</template>
		<template>manage/user/index.php</template>
		<template>manage/user/index.filter.php</template>
		<template>manage/user/index.list.php</template>
		<style>site.user.css</style>
	</files>
	<sql on="install" type="mysql"><![CDATA[

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

CREATE TABLE IF NOT EXISTS `<%?prefix%>users` (
  `userId` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `roleId` int(11) unsigned DEFAULT NULL,
  `status` tinyint(1) NOT NULL,
  `email` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL,
  `username` varchar(30) COLLATE utf8_unicode_ci NOT NULL,
  `password` varchar(30) COLLATE utf8_unicode_ci NOT NULL,
  `createdAt` decimal(12,0) NOT NULL,
  `modifiedAt` decimal(12,0) DEFAULT NULL,
  `loggedAt` decimal(12,0) DEFAULT NULL,
  `activeAt` decimal(12,0) DEFAULT NULL,
  PRIMARY KEY (`userId`),
  KEY `roleId` (`roleId`,`status`,`email`,`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

]]>
	</sql>
	<sql on="install" type="sqlite"><![CDATA[
DROP TABLE IF EXISTS "<%?prefix%>users";
CREATE TABLE "<%?prefix%>users" (
	"userId" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL ,
	"roleId" INTEGER,
	"status" INTEGER,
	"username" VARCHAR,
	"password" VARCHAR,
	"email" VARCHAR,
	"createdAt" DECIMAL,
	"modifiedAt" DECIMAL,
	"loggedAt" DECIMAL,
	"activeAt" DECIMAL
	);

]]>
	</sql>
	
	<sql on="uninstall" type="mysql"><![CDATA[
DROP TABLE IF EXISTS `<%?prefix%>users`;
]]>
	</sql>
	<sql on="uninstall" type="sqlite"><![CDATA[
DROP TABLE IF EXISTS "<%?prefix%>users";
]]>
	</sql>
</module>

