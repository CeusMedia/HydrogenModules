(function($){jQuery.fn.cmClearInput=function(method){var methods={init:function(options){var settings=jQuery.extend({offsetTop:8,offsetRight:6},options);return this.each(function(){setupTrigger($(this),settings);})}};function setupTrigger(input,settings){var trigger=$("<span></span>").addClass("cmClearInput-trigger");if($("body.uses-FontAwesome").length){var icon=$("<i></i>").addClass('fa fa-fw fa-times-circle');trigger.html(icon)}var data={input:input,trigger:trigger};positionTrigger(input,trigger.insertAfter(input),settings);input.on("change.updateClearTrigger",data,function(event){updateTriggerVisibility($(this),event.data.trigger);}).trigger("change.updateClearTrigger");trigger.on("click",data,function(event){event.data.input.val("");event.data.input.trigger("keyup.*");event.data.input.trigger("change.*");})}function positionTrigger(input,trigger,settings){input.parent().css("position","relative");var left=input.outerWidth();left-=parseInt(input.css("border-right-width"));left-=parseInt(input.css("margin-right"));left-=trigger.width()+settings.offsetRight;left=(left/input.parent().width()*100)+"%";var top=input.position().top+parseInt(input.css("margin-top"));top+=parseInt(input.css("border-top-width"))+settings.offsetTop;trigger.css({left:left,top:top});}function updateTriggerVisibility(input,trigger){var isVisible=trigger.is(":visible");var shouldBe=input.val().length>0;if(!isVisible&&shouldBe){trigger.show();}else if(isVisible&&!shouldBe){trigger.hide();}}if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof(method)==='object'||!method){return methods.init.apply(this,arguments);}$.error('Method '+method+' does not exist on cmClearInput');}})(jQuery);