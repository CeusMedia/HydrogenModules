<?xml version="1.0"?>
<module>
	<title>JS: jQuery</title>
	<description><![CDATA[jQuery JavaScript Library]]></description>
	<version>3.3.1-p2</version>
	<category>JavaScript</category>
	<author site="http://jquery.org/team">jQuery Team</author>
	<url>http://jquery.com/</url>
	<license source="http://jquery.org/license">MIT / GPL 2</license>
	<files>
		<script top="yes">jquery-1.8.2.js</script>
		<script top="yes">jquery-1.8.2.min.js</script>
		<script top="yes">jquery-1.10.2.js</script>
		<script top="yes">jquery-1.10.2.min.js</script>
		<script top="yes">jquery-1.10.2.min.map</script>
		<script top="yes">jquery-1.11.1.js</script>
		<script top="yes">jquery-1.11.1.min.js</script>
		<script top="yes">jquery-1.11.1.min.map</script>
		<script top="yes">jquery-3.3.1.js</script>
		<script top="yes">jquery-3.3.1.min.js</script>
		<script top="yes">jquery-3.3.1.min.map</script>
		<script top="yes">jquery-migrate-1.4.1.js</script>
		<script top="yes">jquery-migrate-3.0.1.js</script>
		<script top="yes">jquery-migrate-3.0.1.min.js</script>
	</files>
	<config protected="yes" type="string" name="version" values="1.8.2,1.10.2,1.11.1,3.3.1">3.3.1</config>
	<config protected="yes" type="boolean" name="load.minified">yes</config>
	<config protected="yes" type="boolean" name="load.map">no</config>
	<config protected="yes" type="boolean" name="migrate">yes</config>
	<config protected="yes" type="string" name="migrate.debug" values="auto,on,off">auto</config>
	<hook type="resource" resource="Page" event="applyModules"><![CDATA[
		$pathJs		= $env->getConfig()->get( 'path.scripts' );
		$version	= $module->config['version']->value;
		$minified	= $module->config['load.minified']->value;
		if( $minified ){
			$context->addJavaScript( $pathJs.'jquery-'.$version.'.min.js' );
			if( $module->config['load.map']->value )
				$versions	= array( '1.10.2', '1.11.1', '3.3.1' );
				if( in_array( $version, $versions ) )
					$context->js->addUrl( $pathJs.'jquery-'.$version.'.min.map', 9 );
		}
		else
			$context->addJavaScript( $pathJs.'jquery-'.$version.'.js' );

		if( $module->config['migrate']->value ){
			$debug	= $module->config['migrate.debug']->value;
			if( $debug === "off" || $debug === "auto" && $minified )
				$context->addJavaScript( $pathJs.'jquery-migrate-3.0.1.min.js' );
			else
				$context->addJavaScript( $pathJs.'jquery-migrate-3.0.1.js' );
		}
		$context->addBodyClass( 'uses-jQuery' );
	]]></hook>
</module>
